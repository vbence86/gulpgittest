webshims.register("mediaelement-yt",function(e,t,n,i,a){"use strict";var r=t.mediaelement,o=jQuery.Deferred();n.onYouTubePlayerAPIReady=function(){o.resolve()},n.YT&&YT.Player&&n.onYouTubePlayerAPIReady();var s={paused:!0,ended:!1,currentSrc:"",duration:n.NaN,readyState:0,networkState:0,videoHeight:0,videoWidth:0,error:null,buffered:{start:function(e){return e?(t.error("buffered index size error"),a):0},end:function(e){return e?(t.error("buffered index size error"),a):0},length:0}},u=Object.keys(s),l={currentTime:0,volume:1,muted:!1};Object.keys(l);var c=e.extend({isActive:"html5",activating:"html5",wasSwfReady:!1,_metadata:!1,_callMeta:!1,currentTime:0,_buffered:0,_ppFlag:a},s,l),d=function(t,n){n=e.Event(n),n.preventDefault(),e.event.trigger(n,a,t)},p=function(){var e=["_buffered","_metadata","_ppFlag","currentSrc","currentTime","duration","ended","networkState","paused","videoHeight","videoWidth","_callMeta"],t=e.length;return function(n){if(n){var i=t,a=n.networkState;for(n.readyState=0;--i;)delete n[e[i]];n.buffered.length=0,clearInterval(n._timeInterval),a&&d(n._elem,"emptied")}}}(),f=function(t){var n=t._elem,i=t.shadowElem;i.css({width:n.style.width||e(n).width(),height:n.style.height||e(n).height()})},m=function(e){try{e.nodeName}catch(n){return null}var i=t.data(e,"mediaelement");return i&&"third"==i.isActive?i:null},h=function(n){var i;return n=n.split("?"),-1!=n[0].indexOf("youtube.com/watch")&&n[1]?(n=n[1].split("&"),e.each(n,function(e,t){return t=t.split("="),"v"==t[0]?(n=t[1],i=!0,!1):a})):-1!=n[0].indexOf("youtube.com/v/")&&(n=n[0].split("/"),e.each(n,function(e,t){return i?(n=t,!1):("v"==t&&(i=!0),a)})),i||t.warn("no youtube id found: "+n),n},v=function(t){t&&(t._ppFlag===a&&e.prop(t._elem,"autoplay")||!t.paused)&&setTimeout(function(){if("third"==t.isActive&&(t._ppFlag===a||!t.paused))try{e(t._elem).play()}catch(n){}},1)},g=e.noop;(function(){var n={play:1,playing:1},a=["play","pause","playing","canplay","progress","waiting","ended","loadedmetadata","durationchange","emptied"],r=a.map(function(e){return e+".webshimspolyfill"}).join(" "),o=function(i){var a=t.data(i.target,"mediaelement");if(a){var r=i.originalEvent&&i.originalEvent.type===i.type;r==("third"==a.activating)&&(i.stopImmediatePropagation(),n[i.type]&&a.isActive!=a.activating&&e(i.target).pause())}};g=function(n){e(n).off(r).on(r,o),a.forEach(function(e){t.moveToFirstEvent(n,e)})},g(i)})(),e(i).on("emptied",function(e){var t=m(e.target);v(t)}),r.setActive=function(n,i,a){if(a||(a=t.data(n,"mediaelement")),a&&a.isActive!=i){"html5"!=i&&"third"!=i&&t.warn("wrong type for mediaelement activating: "+i);var r=t.data(n,"shadowData");a.activating=i,e(n).pause(),a.isActive=i,"third"==i?(r.shadowElement=r.shadowFocusElement=a.shadowElem[0],e(n).addClass("yt-api-active nonnative-api-active").hide().getShadowElement().show()):(clearInterval(a._timeInterval),e(n).removeClass("yt-api-active nonnative-api-active").show().getShadowElement().hide(),r.shadowElement=r.shadowFocusElement=!1),e(n).trigger("mediaelementapichange")}};var y=function(t,n){n._ppFlag=!0,"playing"==t&&(y("play",n),3>n.readyState&&(n.readyState=3,d(n._elem,"canplay")),e(n._elem).trigger("playing")),"play"==t&&n.paused?(n.paused=!1,d(n._elem,"play")):"pause"!=t||n.paused||(n.paused=!0,d(n._elem,"pause"))},b=function(t,n,i,a){o.done(function(){var r=function(){var n,a;i._metadata&&i._ytAPI.getVideoLoadedFraction&&(a=i._ytAPI.getVideoLoadedFraction(),n=a*i.duration,i._buffered!==n&&(i._buffered=n,i.buffered.length=1,e(t).trigger("progress")),a>.99&&(i.networkState=1),4>i.readyState&&i.currentTime&&(i._buffered-i.currentTime>9||a>.9)&&(i.readyState=4,d(i._elem,"canplaythrough")))},o=function(){if(i._ytAPI&&i._ytAPI.getCurrentTime){var n=i._ytAPI.getCurrentTime();i.currentTime!=n&&(i.currentTime=n,e(t).trigger("timeupdate")),r()}},s=function(){if("third"==i.isActive&&i._ytAPI&&i._ytAPI.getVolume){var n,a=i._ytAPI.getVolume()/100,s=i._ytAPI.isMuted();a!=i.volume&&(i.volume=a,n=!0),s!=i.muted&&(i.muted=s,n=!0),o(),r(),n&&e(t).trigger("volumechange")}},u=function(){clearInterval(i._timeInterval),i._timeInterval=setInterval(function(){var n=i._ytAPI.getCurrentTime();i.currentTime!=n&&(i.currentTime=n,e(t).trigger("timeupdate"))},350)};i._ytAPI=new YT.Player(n,{height:"100%",width:"100%",allowfullscreen:"allowfullscreen",webkitallowfullscreen:"allowfullscreen",playerVars:{allowfullscreen:!0,fs:1,rel:0,showinfo:0,autohide:1,controls:e.prop(t,"controls")?1:0},videoId:a,events:{onReady:function(){v(i),setTimeout(s,9),setInterval(s,5e3)},onStateChange:function(n){if(n.target.getDuration){var a;if(!i._metadata){var r=n.target.getDuration();r&&(i._metadata=!0,i.duration=r,1>i.readyState&&(i.readyState=1),1>i.networkState&&(i.networkState=2),a=!0)}a&&e(t).trigger("durationchange").trigger("loadedmetadata"),setTimeout(s,9),1==n.data?(y("playing",i),u()):2==n.data?(clearInterval(i._timeInterval),y("pause",i)):3==n.data?(i.readyState>2&&(i.readyState=2),i.networkState=2,e(t).trigger("waiting")):0===n.data&&(i.readyState>4&&(i.readyState=4),i.networkState=1,clearInterval(i._timeInterval),e(t).trigger("ended"))}}}}),e(t).on("updateytdata",s)})};r.createSWF=function(n,i,s){s||(s=t.data(n,"mediaelement"));var u=h(i.src);if(s)return r.setActive(n,"third",s),p(s),s.currentSrc=i.srcProp,o.done(function(){s._ytAPI.loadVideoById&&s._ytAPI.loadVideoById(u)}),a;e.prop(n,"controls");var l="yt-"+t.getID(n),d=e('<div class="polyfill-video polyfill-mediaelement" id="wrapper-'+l+'"><div id="'+l+'"></div>').css({position:"relative",overflow:"hidden"}),m=function(){f(s)};s=t.data(n,"mediaelement",t.objectCreate(c,{shadowElem:{value:d},_elem:{value:n},currentSrc:{value:i.srcProp},buffered:{value:{start:function(e){return e>=s.buffered.length?(t.error("buffered index size error"),a):0},end:function(e){return e>=s.buffered.length?(t.error("buffered index size error"),a):s._buffered},length:0}}})),f(s),d.insertBefore(n),t.addShadowDom(n,d),r.setActive(n,"third",s),g(n),b(n,l,s,u),e(n).on("updatemediaelementdimensions",m).onWSOff("updateshadowdom",m)},function(){var n,i=function(t){clearTimeout(t.updateDataTimer),t.updateDataTimer=setTimeout(function(){e(t._elem).triggerHandler("updateytdata")},9)},r={},o=function(e){r[e]={get:function(){var t=m(this);return t?t[e]:n[e].prop._supget.apply(this)},writeable:!1}},s=function(e,t){o(e),delete r[e].writeable,r[e].set=t};u.forEach(o),s("currentTime",function(e){var t=m(this);return t?(e*=1,!isNaN(e)&&t._ytAPI&&t._ytAPI.seekTo&&(t._ytAPI.seekTo(e),i(t)),a):n.currentTime.prop._supset.apply(this,arguments)}),s("muted",function(e){var t=m(this);return t?(t._ytAPI&&t._ytAPI.mute&&(t._ytAPI[e?"mute":"unMute"](),i(t)),a):n.muted.prop._supset.apply(this,arguments)}),s("volume",function(e){var r=m(this);return r?(e*=100,!isNaN(e)&&r._ytAPI&&r._ytAPI.setVolume&&((0>e||e>100)&&t.error("volume greater or less than allowed "+e/100),r._ytAPI.setVolume(e),i(r)),a):n.volume.prop._supset.apply(this,arguments)}),e.each(["play","pause"],function(e,t){var i=t+"Video";r[t]={value:function(){var e=m(this);return e?(e._ytAPI&&e._ytAPI[i]&&(e._ytAPI[i](),y(t,e)),a):n[t].prop._supvalue.apply(this,arguments)}}}),n=t.defineNodeNameProperties("video",r,"prop")}()});