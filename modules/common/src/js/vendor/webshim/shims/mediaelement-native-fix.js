webshims.register("mediaelement-native-fix",function(e,t,n,i){if(!Modernizr.videoBuffered){var a=function(e){var n=t.data(e,"mediaelementBuffered");return n||(n={buffered:{start:function(e){return e>=n.buffered.length?(t.error("buffered index size error"),undefined):0},end:function(e){return e>=n.buffered.length?(t.error("buffered index size error"),undefined):n.loaded},length:0},loaded:0},t.data(e,"mediaelementBuffered",n)),n},r=function(n){if(n=n.originalEvent,n&&"lengthComputable"in n){var i=t.data(n.target,"mediaelement");if((!i||"html5"==i.isActive)&&n.lengthComputable&&"loaded"in n){var r=n.target.duration,o=a(n.target);o.loaded=r?n.loaded/n.total*r:0,o.loaded&&(o.buffered.length=1),"load"==n.type&&e(n.target).triggerHandler("progress")}}},o=function(e){var t=a(e.target);t.buffered.length=0,t.loaded=0};["audio","video"].forEach(function(e){var n=t.defineNodeNameProperty(e,"buffered",{prop:{get:function(){var e=t.data(this,"mediaelement");return e&&"flash"==e.isActive&&n.prop._supget?(n.prop._supget.apply(this),undefined):a(this).buffered}}})}),function(){var e=i.createElement("video");if(!("preload"in e)&&"autobuffer"in e){var n={metadata:1,none:1};t.onNodeNamesPropertyModify(["audio","video"],["preload"],{set:function(e,i,a){n[e]||"removeAttr"==a?this.autobuffer=!1:"html5"==!(t.data(this,"mediaelement")||{}).isActive&&(this.autobuffer=!0)},initAttr:!0})}}(),t.addReady(function(t,n){e("video, audio",t).add(n.filter("video, audio")).on("load progress",r).on("emptied",o)})}});