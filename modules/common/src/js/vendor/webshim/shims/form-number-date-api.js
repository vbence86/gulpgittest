webshims.register("form-number-date-api",function(e,t,n,i){"use strict";t.addInputType||t.error("you can not call forms-ext feature after calling forms feature. call both at once instead: $.webshims.polyfill('forms forms-ext')"),t.getStep||(t.getStep=function(t,n){var i=e.attr(t,"step");return"any"===i?i:(n=n||u(t),a[n]&&a[n].step?(i=v.number.asNumber(i),(!isNaN(i)&&i>0?i:a[n].step)*(a[n].stepScaleFactor||1)):i)}),t.addMinMaxNumberToCache||(t.addMinMaxNumberToCache=function(e,t,n){e+"AsNumber"in n||(n[e+"AsNumber"]=a[n.type].asNumber(t.attr(e)),isNaN(n[e+"AsNumber"])&&e+"Default"in a[n.type]&&(n[e+"AsNumber"]=a[n.type][e+"Default"]))});var r=parseInt("NaN",10),a=t.inputTypes,o=function(e){return"number"==typeof e||e&&e==1*e},s=function(t){return e('<input type="'+t+'" />').prop("type")===t},u=function(e){return(e.getAttribute("type")||"").toLowerCase()},l=function(e){return e&&!isNaN(1*e)},c=t.addMinMaxNumberToCache,p=function(e,t){e=""+e,t-=e.length;for(var n=0;t>n;n++)e="0"+e;return e},d=1e-7,f=t.bugs.bustedValidity;t.addValidityRule("stepMismatch",function(e,n,i,r){if(""===n)return!1;"type"in i||(i.type=u(e[0]));var o,s=(r||{}).stepMismatch||!1;if(a[i.type]&&a[i.type].step){if("step"in i||(i.step=t.getStep(e[0],i.type)),"any"==i.step)return!1;if("valueAsNumber"in i||(i.valueAsNumber=a[i.type].asNumber(n)),isNaN(i.valueAsNumber))return!1;c("min",e,i),o=i.minAsNumber,isNaN(o)&&(o=a[i.type].stepBase||0),s=Math.abs((i.valueAsNumber-o)%i.step),s=!(d>=s||d>=Math.abs(s-i.step))}return s}),[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(e){t.addValidityRule(e.name,function(t,n,i,r){var o=(r||{})[e.name]||!1;if(""===n)return o;if("type"in i||(i.type=u(t[0])),a[i.type]&&a[i.type].asNumber){if("valueAsNumber"in i||(i.valueAsNumber=a[i.type].asNumber(n)),isNaN(i.valueAsNumber))return!1;if(c(e.attr,t,i),isNaN(i[e.attr+"AsNumber"]))return o;o=i[e.attr+"AsNumber"]*e.factor<i.valueAsNumber*e.factor-d}return o})}),t.reflectProperties(["input"],["max","min","step"]);var h=t.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var t=this,n=u(t),i=a[n]&&a[n].asNumber?a[n].asNumber(e.prop(t,"value")):h.prop._supget&&h.prop._supget.apply(t,arguments);return null==i&&(i=r),i},set:function(n){var i=this,r=u(i);if(a[r]&&a[r].numberToString){if(isNaN(n))return e.prop(i,"value",""),undefined;var o=a[r].numberToString(n);o!==!1?e.prop(i,"value",o):t.error("INVALID_STATE_ERR: DOM Exception 11")}else h.prop._supset&&h.prop._supset.apply(i,arguments)}}}),m=t.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var t=this,n=u(t);return a[n]&&a[n].asDate&&!a[n].noAsDate?a[n].asDate(e.prop(t,"value")):m.prop._supget&&m.prop._supget.call(t)||null},set:function(n){var i=this,r=u(i);if(!a[r]||!a[r].dateToString||a[r].noAsDate)return m.prop._supset&&m.prop._supset.apply(i,arguments)||null;if(null===n)return e.prop(i,"value",""),"";var o=a[r].dateToString(n);return o!==!1?(e.prop(i,"value",o),o):(t.error("INVALID_STATE_ERR: DOM Exception 11"),undefined)}}});e.each({stepUp:1,stepDown:-1},function(n,i){var r=t.defineNodeNameProperty("input",n,{prop:{value:function(n){var o,s,l,c,p,f,h=u(this);if(!a[h]||!a[h].asNumber){if(r.prop&&r.prop.value)return r.prop.value.apply(this,arguments);throw t.info("no step method for type: "+h),"invalid state error"}if(f={type:h},n||(n=1,t.info("you should always use a factor for stepUp/stepDown")),n*=i,s=e.prop(this,"valueAsNumber"),isNaN(s))throw t.info("valueAsNumber is NaN can't apply stepUp/stepDown "),"invalid state error";if(o=t.getStep(this,h),"any"==o)throw t.info("step is 'any' can't apply stepUp/stepDown"),"invalid state error";if(t.addMinMaxNumberToCache("min",e(this),f),t.addMinMaxNumberToCache("max",e(this),f),o*=n,s=1*(s+o).toFixed(5),c=(s-(f.minAsNumber||0))%o,c&&Math.abs(c)>d&&(p=s-c,p+=c>0?o:-o,s=1*p.toFixed(5)),!isNaN(f.maxAsNumber)&&s>f.maxAsNumber||!isNaN(f.minAsNumber)&&f.minAsNumber>s)throw t.info("max/min overflow can't apply stepUp/stepDown"),"invalid state error";l?e.prop(this,"valueAsDate",l):e.prop(this,"valueAsNumber",s)}}})});var v={number:{mismatch:function(e){return!o(e)},step:1,stepScaleFactor:1,asNumber:function(e){return o(e)?1*e:r},numberToString:function(e){return o(e)?e:!1}},range:{minDefault:0,maxDefault:100},color:{mismatch:function(){var e=/^\u0023[a-f0-9]{6}$/;return function(t){return!t||7!=t.length||!e.test(t)}}()},date:{mismatch:function(e){if(!e||!e.split||!/\d$/.test(e))return!0;var t,n=e.split(/\u002D/);if(3!==n.length)return!0;var i=!1;if(4>n[0].length||2!=n[1].length||n[1]>12||2!=n[2].length||n[2]>33)i=!0;else for(t=0;3>t;t++)if(!l(n[t])){i=!0;break}return i||e!==this.dateToString(this.asDate(e,!0))},step:1,stepScaleFactor:864e5,asDate:function(e,t){return!t&&this.mismatch(e)?null:new Date(this.asNumber(e,!0))},asNumber:function(e,t){var n=r;return(t||!this.mismatch(e))&&(e=e.split(/\u002D/),n=Date.UTC(e[0],e[1]-1,e[2])),n},numberToString:function(e){return o(e)?this.dateToString(new Date(1*e)):!1},dateToString:function(e){return e&&e.getFullYear?p(e.getUTCFullYear(),4)+"-"+p(e.getUTCMonth()+1,2)+"-"+p(e.getUTCDate(),2):!1}},time:{mismatch:function(t,n){if(!t||!t.split||!/\d$/.test(t))return!0;if(t=t.split(/\u003A/),2>t.length||t.length>3)return!0;var i,r=!1;return t[2]&&(t[2]=t[2].split(/\u002E/),i=parseInt(t[2][1],10),t[2]=t[2][0]),e.each(t,function(e,t){return l(t)&&2===t.length?undefined:(r=!0,!1)}),r?!0:t[0]>23||0>t[0]||t[1]>59||0>t[1]?!0:t[2]&&(t[2]>59||0>t[2])?!0:i&&isNaN(i)?!0:(i&&(100>i?i*=100:10>i&&(i*=10)),n===!0?[t,i]:!1)},step:60,stepBase:0,stepScaleFactor:1e3,asDate:function(e){return e=new Date(this.asNumber(e)),isNaN(e)?null:e},asNumber:function(e){var t=r;return e=this.mismatch(e,!0),e!==!0&&(t=Date.UTC("1970",0,1,e[0][0],e[0][1],e[0][2]||0),e[1]&&(t+=e[1])),t},dateToString:function(e){if(e&&e.getUTCHours){var t=p(e.getUTCHours(),2)+":"+p(e.getUTCMinutes(),2),n=e.getSeconds();return"0"!=n&&(t+=":"+p(n,2)),n=e.getUTCMilliseconds(),"0"!=n&&(t+="."+p(n,3)),t}return!1}},month:{mismatch:function(e){return v.date.mismatch(e+"-01")},step:1,stepScaleFactor:!1,asDate:function(e){return new Date(v.date.asNumber(e+"-01"))},asNumber:function(e){var t=r;return e&&!this.mismatch(e)&&(e=e.split(/\u002D/),e[0]=1*e[0]-1970,e[1]=1*e[1]-1,t=12*e[0]+e[1]),t},numberToString:function(e){var t,n=!1;return o(e)&&(t=e%12,e=(e-t)/12+1970,t+=1,1>t&&(e-=1,t+=12),n=p(e,4)+"-"+p(t,2)),n},dateToString:function(e){if(e&&e.getUTCHours){var t=v.date.dateToString(e);return t.split&&(t=t.split(/\u002D/))?t[0]+"-"+t[1]:!1}return!1}}};!f&&s("range")&&s("time")&&s("month")||(v.range=e.extend({},v.number,v.range),v.time=e.extend({},v.date,v.time),v.month=e.extend({},v.date,v.month)),["number","month","range","date","time","color"].forEach(function(e){(f||!s(e))&&t.addInputType(e,v[e])}),null==e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){if("hidden"==this.type)return null;var t=this.id,n=e(this).closest("label").filter(function(){var e=this.attributes["for"]||{};return!e.specified||e.value==t});return t&&(n=n.add('label[for="'+t+'"]')),n.get()},writeable:!1}})});