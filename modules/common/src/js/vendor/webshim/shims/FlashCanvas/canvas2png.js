(function(e){var t=e.getElementsByTagName("script"),n=t[t.length-1],a=n.getAttribute("src").replace(/[^\/]+$/,"save.php");window.canvas2png=function(t){var n=t.tagName.toLowerCase();if("canvas"===n)if("undefined"!=typeof FlashCanvas)FlashCanvas.saveImage(t);else{var o=e.createElement("form"),r=e.createElement("input");o.setAttribute("action",a),o.setAttribute("method","post"),r.setAttribute("type","hidden"),r.setAttribute("name","dataurl"),r.setAttribute("value",t.toDataURL()),e.body.appendChild(o),o.appendChild(r),o.submit(),o.removeChild(r),e.body.removeChild(o)}}})(document);